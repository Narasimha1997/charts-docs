<%
=begin
apps: postgresql
platforms: kubernetes
id: add_nodes
title: Add a new node to the cluster
category: administration
weight: 30
highlight: 30
=end %>

To add a new node to your PostgreSQL cluster, you need to upgrade your installation by providing some parameters to the *helm upgrade* command:

* Pass as *password* the password used in the installation time. If you did not provide a password follow the intructions from the NOTES.txt to get the generated password.
* Use the *replication.enabled=true* to enable chart replication.
* Use the *replication.slaveReplicas* parameter to modify the number of nodes in your PostgreSQL deployment.
* Pass as *replication.repl_password* the replication password you obtained at the installation time.

The following will be an example to add more nodes:

~~~
$ helm upgrade my-release <%= variable :repo_name, :platform %>/postgresql \
--set password=POSTGRESQL_PASSWORD \
--set replication.enabled=true \
--set replication.slaveReplicas=NUMBER_OF_REPLICAS \
--set replication.repl_password=REPLICATION_PASSWORD
~~~

> NOTE: You need to substitute the placeholders POSTGRESQL_PASSWORD and REPLICATION_PASSWORD with the values obtained from instructions in the installation notes. Also replace NUMBER_OF_REPLICAS with the total number of nodes you want to add to the existing cluster.
